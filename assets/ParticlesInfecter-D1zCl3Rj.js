import{P as x}from"./ParticlesInteractorBase-vfDeBun3.js";import{I as R}from"./index-B5p0OL-A.js";const q=1,y=2;class B extends x{constructor(e){super(e)}clear(){}init(){}interact(e,a){var g,u,d;const i=this.container.infecter;if(!i||(i.updateInfection(e,a.value),((g=e.infection)==null?void 0:g.stage)===void 0))return;const s=this.container,l=s.actualOptions,n=l.infection;if(!(n!=null&&n.enable)||n.stages.length<q)return;const o=n.stages[e.infection.stage],I=s.retina.pixelRatio,S=e.getRadius()*y+o.radius*I,h=e.getPosition(),r=o.infectedStage??e.infection.stage,f=s.particles.quadTree.queryCircle(h,S),m=o.rate,b=f.length;for(const p of f){const t=p;if(!(t===e||t.destroyed||t.spawning||!(((u=t.infection)==null?void 0:u.stage)===void 0||t.infection.stage!==e.infection.stage)||R()>=m/b)){if(((d=t.infection)==null?void 0:d.stage)===void 0)i.startInfection(t,r);else if(t.infection.stage<e.infection.stage)i.updateInfectionStage(t,r);else if(t.infection.stage>e.infection.stage){const c=n.stages[t.infection.stage],P=(c==null?void 0:c.infectedStage)??t.infection.stage;i.updateInfectionStage(e,P)}}}}isEnabled(){var e,a;return((a=(e=this.container.actualOptions)==null?void 0:e.infection)==null?void 0:a.enable)??!1}reset(){}}export{B as ParticlesInfecter};
