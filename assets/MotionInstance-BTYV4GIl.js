import{g as o}from"./index-B5p0OL-A.js";const r=1,c=0,s=1;class h{constructor(n,a){this._handleMotionChange=e=>{const t=this._container,i=t.actualOptions.motion;i&&(e.matches?i.disable?t.retina.reduceFactor=c:t.retina.reduceFactor=i.reduce.value?s/i.reduce.factor:r:t.retina.reduceFactor=1)},this._container=n,this._engine=a}async init(){const n=this._container,a=n.actualOptions.motion;if(!(a&&(a.disable||a.reduce.value))){n.retina.reduceFactor=1;return}const e=o("(prefers-reduced-motion: reduce)");if(!e){n.retina.reduceFactor=r;return}this._handleMotionChange(e);const t=()=>{(async()=>{this._handleMotionChange(e);try{await n.refresh()}catch{}})()};e.addEventListener!==void 0?e.addEventListener("change",t):e.addListener!==void 0&&e.addListener(t),await Promise.resolve()}}export{h as MotionInstance};
