import{s as c,W as C,a3 as h,a4 as G,k as x,Q as R,G as u,o as g,r as M,a5 as F,a6 as v,a7 as b,Z as H,H as O,I as w,a8 as A,e as V}from"./index-B5p0OL-A.js";import{A as k}from"./AnimatableColor-Crycc3PH.js";import"./AnimationOptions-dYZkkA9i.js";import"./OptionsColor-BM9eQp3A.js";class S{constructor(){this.count=0,this.enable=!1,this.speed=0,this.decay=0,this.delay=0,this.sync=!1,this.startValue="random"}load(e){e&&(e.count!==void 0&&(this.count=c(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=c(e.speed)),e.sync!==void 0&&(this.sync=e.sync),e.startValue!==void 0&&(this.startValue=e.startValue),e.decay!==void 0&&(this.decay=c(e.decay)),e.delay!==void 0&&(this.delay=c(e.delay)))}}class T{constructor(){this.value=0,this.animation=new S}load(e){e&&(this.animation.load(e.animation),e.value!==void 0&&(this.value=c(e.value)))}}class D{constructor(){this.stop=0,this.value=new k}load(e){e&&(e.stop!==void 0&&(this.stop=e.stop),this.value=k.create(this.value,e.value),e.opacity!==void 0&&(this.opacity=new T,C(e.opacity)?this.opacity.value=e.opacity:this.opacity.load(e.opacity)))}}class I{constructor(){this.count=0,this.enable=!1,this.speed=0,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(e.count!==void 0&&(this.count=c(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=c(e.speed)),e.decay!==void 0&&(this.decay=c(e.decay)),e.delay!==void 0&&(this.delay=c(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class L{constructor(){this.value=0,this.animation=new I,this.direction="clockwise"}load(e){e&&(this.animation.load(e.animation),e.value!==void 0&&(this.value=c(e.value)),e.direction!==void 0&&(this.direction=e.direction))}}class P{constructor(){this.angle=new L,this.colors=[],this.type="random"}load(e){e&&(this.angle.load(e.angle),e.colors!==void 0&&(this.colors=e.colors.map(i=>{const n=new D;return n.load(i),n})),e.type!==void 0&&(this.type=e.type))}}function E(s,e){const{gradient:i}=s;if(i){h(s,i.angle,!1,"none",e);for(const n of i.colors)G(n.value,e),n.opacity&&h(s,n.opacity,!0,"none",e)}}const N=2,Q=Math.PI*N;class z{getColorStyles(e,i,n,l){const r=e.gradient;if(!r)return{};const a=r.angle.value,d={x:0,y:0},t=0,y=r.type==="radial"?i.createRadialGradient(d.x,d.y,t,d.x,d.y,n):i.createLinearGradient(Math.cos(a)*-n,Math.sin(a)*-n,Math.cos(a)*n,Math.sin(a)*n);for(const{stop:m,value:f,opacity:o}of r.colors)y.addColorStop(m,x({h:f.h.value,s:f.s.value,l:f.l.value},(o==null?void 0:o.value)??l));return{fill:y}}init(e){const i=R(e.options.gradient);if(!i)return;const{angle:n}=i,l=360,r=1;e.gradient={angle:{value:u(n.value),enable:n.animation.enable,velocity:u(n.animation.speed)/l*e.container.retina.reduceFactor,decay:r-u(n.animation.decay),delayTime:u(n.animation.delay)*g,max:Q,min:0,time:0},type:i.type,colors:[]};let a=i.angle.direction;switch(a==="random"&&(a=w()>A?"counter-clockwise":"clockwise"),a){case"counter-clockwise":case"counterClockwise":e.gradient.angle.status="decreasing";break;case"clockwise":e.gradient.angle.status="increasing";break}const d=e.options.reduceDuplicates;for(const t of i.colors){const y=M(t.value,e.id,d);if(!y)continue;const m=F(y,t.value.animation,e.container.retina.reduceFactor),f={stop:t.stop,value:m,opacity:t.opacity?{enable:t.opacity.animation.enable,max:v(t.opacity.value),min:b(t.opacity.value),status:"increasing",value:u(t.opacity.value),velocity:u(t.opacity.animation.speed)/H*e.container.retina.reduceFactor,decay:r-u(t.opacity.animation.decay),delayTime:u(t.opacity.animation.delay)*g,time:0}:void 0},{opacity:o}=f;if(t.opacity&&o){const p=t.opacity.value;switch(o.min=b(p),o.max=v(p),t.opacity.animation.startValue){case"min":o.value=o.min,o.status="increasing";break;case"max":o.value=o.max,o.status="decreasing";break;case"random":default:o.value=O(o),o.status=w()>=A?"increasing":"decreasing";break}}e.gradient.colors.push(f)}}isEnabled(e){var i,n;return!e.destroyed&&!e.spawning&&(!!((i=e.gradient)!=null&&i.angle.enable)||(((n=e.gradient)==null?void 0:n.colors.some(l=>l.value.h.enable||l.value.s.enable||l.value.l.enable))??!1))}loadOptions(e,...i){for(const n of i){if(!(n!=null&&n.gradient))continue;const l=n.gradient;l&&(e.gradient=V(l,r=>{const a=new P;return a.load(r),a}))}}update(e,i){E(e,i)}}export{z as GradientUpdater};
